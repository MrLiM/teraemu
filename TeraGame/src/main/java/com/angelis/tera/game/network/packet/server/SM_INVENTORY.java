package com.angelis.tera.game.network.packet.server;

import java.nio.ByteBuffer;

import com.angelis.tera.game.models.player.Player;
import com.angelis.tera.game.network.connection.TeraGameConnection;
import com.angelis.tera.game.network.packet.TeraServerPacket;

public class SM_INVENTORY extends TeraServerPacket {

    private final Player player;
    private boolean isInventory;
    
    public SM_INVENTORY(Player player) {
        this.player = player;
    }
    
    @Override
    protected void writeImpl(TeraGameConnection connection, ByteBuffer byteBuffer) {
        /*writeH(byteBuffer, (short) player.getInventory().getItemCount());
        writeH(byteBuffer, 0); //first item shift
        writeUid(byteBuffer, player);
        writeQ(byteBuffer, player.getInventory().getMoney());
        writeC(byteBuffer, (byte) (isInventory ? 1 : 0));
        writeH(byteBuffer, 1); //Unk
        writeD(byteBuffer, player.getInventory().getSize()); //Size

        writeD(byteBuffer, 34); //EU ???
        writeD(byteBuffer, 34); //EU ???

        int savePosition = byteBuffer.position();
        byteBuffer.position(6);
        writeH(byteBuffer, (short) savePosition);
        byteBuffer.position(savePosition);*/
        
        writeB(byteBuffer, "11003300432D0E000080000193180000000000000001002800000006000000050000000000000000000000000000003300B50000000000B3007D0000008A8E690300000000D855040000000000160000000000000005000000000000001E0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000B5003701000000003501471F00008B8E690300000000D855040000000000190000000000000005000000000000001E00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003701B90100000000B701EC0300003ED3880300000000D8550400000000001A000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000B9013B02000000003902284500002DEF880300000000D855040000000000030000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000300000000000000000000000000000000000000000000000000000000003B02BD0200000000BB027B300000A5EF880300000000D85504000000000001000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000090000000000000000000000000000000000000000000000000000000000BD023F03000000003D03A017000078F6880300000000D855040000000000170000000000000005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003F03C10300000000BF032E1C00005B10890300000000D85504000000000015000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000C1034304000000004104EA0300000711890300000000D8550400000000001B0000000000000007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004304C50400000000C304294500006515890300000000D85504000000000004000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000C5044705000000004505BC1B00007A1B890300000000D855040000000000140000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004705C90500000000C7053E8B02002727890300000000D8550400000000001D000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000C9054B06000000004906E9030000C34E920300000000D8550400000000001C000000000000000A000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004B06CD0600000000CB06820000004763920300000000D85504000000000018000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000CD064F07000000004D07334500001D75920300000000D855040000000000050000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000900000000000000000000000000000000000000000000000000000000004F07D10700000000CF07B0170000C582920300000000D8550400000000001E000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000D107530800000000510831450000E185920300000000D855040000000000200000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000900000000000000000000000000000000000000000000000000000000005308000000000000D308EB030000FBE6170900000000D85504000000000021000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000");
        

        /*
        int counter = 0;
        
        
        foreach (KeyValuePair<int, StorageItem> inventoryItem in Player.Inventory.Items)
        {
            counter++;
            short nowShift = (short) writer.BaseStream.Length;

            WriteH(writer, nowShift); //Now shift
            WriteH(writer, 0); //Next shift

            WriteD(writer, inventoryItem.Value.ItemId);
            WriteUid(writer, inventoryItem.Value);
            WriteD(writer, 7441);
            WriteD(writer, 0);
            WriteD(writer, inventoryItem.Key);
            WriteD(writer, 0);
            WriteD(writer, inventoryItem.Value.Amount);
            WriteD(writer, 0);
            WriteD(writer, 0);
            WriteD(writer, 1); //Binded?
            WriteD(writer, 0);
            WriteD(writer, 0);
            WriteD(writer, 0);
            WriteD(writer, 0);
            WriteC(writer, 0);
            WriteD(writer, 0); //EffectId
            WriteD(writer, 0); //EffectId
            WriteD(writer, 0); //EffectId
            WriteD(writer, 0); //EffectId
            WriteB(writer, new byte[65]); //unk
            WriteD(writer, 1); //Item Level
            WriteD(writer, 0);

            if (counter < Player.Inventory.Items.Count)
            {
                writer.Seek(nowShift + 2, SeekOrigin.Begin);
                WriteH(writer, (short) writer.BaseStream.Length);
                writer.Seek(0, SeekOrigin.End);
            }
        }
         */
    }
    
    /*
     * [0]      D5082563 11003300 DB380E00 00800003 ..%c..3..8......
[16]    93180000 00000000 01010028 00000006 ...........(....
[32]    00000005 00000000 00000000 00000000 ................
[48]    00000033 00B50000 000000B3 007D0000 ...3.........}..
[64]    008A8E69 03000000 00D85504 00000000 ...i......U.....
[80]    00160000 00000000 00050000 00000000 ................
[96]    001E0000 00000000 00000000 00000000 ................
[112]   00000000 00000000 00000000 00000000 ................
[128]   00000000 00000000 00000000 00000000 ................
[144]   00000000 00000000 00000000 00000000 ................
[160]   00000000 00000000 00000000 00000000 ................
[176]   00000000 00B50037 01000000 00350147 .......7.....5.G
[192]   1F00008B 8E690300 000000D8 55040000 .....i......U...
[208]   00000019 00000000 00000005 00000000 ................
[224]   0000001E 00000000 00000000 00000000 ................
[240]   00000000 00000000 00000000 00000000 ................
[256]   00000000 00000000 00000000 00000000 ................
[272]   00000000 00000000 00000000 00000000 ................
[288]   00000000 00000000 00000000 00000000 ................
[304]   00000000 00000037 01B90100 000000B7 .......7........
[320]   01EC0300 003ED388 03000000 00D85504 .....>........U.
[336]   00000000 001A0000 00000000 00010000 ................
[352]   00000000 00000000 00000000 00000000 ................
[368]   00000000 00000000 00000000 00000000 ................
[384]   00000000 00000000 00000000 00000000 ................
[400]   00000000 00000000 00000000 00000000 ................
[416]   00000000 00000000 00000000 00000000 ................
[432]   00000000 00000000 00B9013B 02000000 ...........;....
[448]   00390228 4500002D EF880300 000000D8 .9.(E..-........
[464]   55040000 00000003 00000000 00000001 U...............
[480]   00000000 00000000 00000000 00000000 ................
[496]   00000000 00000000 00000000 00000000 ................
[512]   00000000 00000000 00000000 00000000 ................
[528]   00000000 00000000 00000000 00030000 ................
[544]   00000000 00000000 00000000 00000000 ................
[560]   00000000 00000000 0000003B 02BD0200 ...........;....
[576]   000000BB 027B3000 00A5EF88 03000000 .....{0.........
[592]   00D85504 00000000 00010000 00000000 ..U.............
[608]   00010000 00000000 00000000 00000000 ................
[624]   00000000 00000000 00000000 00000000 ................
[640]   00000000 00000000 00000000 00000000 ................
[656]   00000000 00000000 00000000 00000009 ................
[672]   00000000 00000000 00000000 00000000 ................
[688]   00000000 00000000 00000000 00BD023F ...............?
[704]   03000000 003D03A0 17000078 F6880300 .....=.....x....
[720]   000000D8 55040000 00000017 00000000 ....U...........
[736]   00000005 00000000 00000000 00000000 ................
[752]   00000000 00000000 00000000 00000000 ................
[768]   00000000 00000000 00000000 00000000 ................
[784]   00000000 00000000 00000000 00000000 ................
[800]   00000000 00000000 00000000 00000000 ................
[816]   00000000 00000000 00000000 0000003F ...............?
[832]   03C10300 000000BF 032E1C00 005B1089 .............[..
[848]   03000000 00D85504 00000000 00150000 ......U.........
[864]   00000000 00010000 00000000 00000000 ................
[880]   00000000 00000000 00000000 00000000 ................
[896]   00000000 00000000 00000000 00000000 ................
[912]   00000000 00000000 00000000 00000000 ................
[928]   00000000 00000000 00000000 00000000 ................
[944]   00000000 00000000 00000000 00000000 ................
[960]   00C10343 04000000 004104EA 03000007 ...C.....A......
[976]   11890300 000000D8 55040000 0000001B ........U.......
[992]   00000000 00000007 00000000 00000000 ................
[1008]  00000000 00000000 00000000 00000000 ................
[1024]  00000000 00000000 00000000 00000000 ................
[1040]  00000000 00000000 00000000 00000000 ................
[1056]  00000000 00000000 00000000 00000000 ................
[1072]  00000000 00000000 00000000 00000000 ................
[1088]  00000043 04C50400 000000C3 04294500 ...C.........)E.
[1104]  00651589 03000000 00D85504 00000000 .e........U.....
[1120]  00040000 00000000 00010000 00000000 ................
[1136]  00000000 00000000 00000000 00000000 ................
[1152]  00000000 00000000 00000000 00000000 ................
[1168]  00000000 00000000 00000000 00000000 ................
[1184]  00000000 00000005 00000000 00000000 ................
[1200]  00000000 00000000 00000000 00000000 ................
[1216]  00000000 00C50447 05000000 004505BC .......G.....E..
[1232]  1B00007A 1B890300 000000D8 55040000 ...z........U...
[1248]  00000014 00000000 00000002 00000000 ................
[1264]  00000000 00000000 00000000 00000000 ................
[1280]  00000000 00000000 00000000 00000000 ................
[1296]  00000000 00000000 00000000 00000000 ................
[1312]  00000000 00000000 00000000 00000000 ................
[1328]  00000000 00000000 00000000 00000000 ................
[1344]  00000000 00000047 05C90500 000000C7 .......G........
[1360]  053E8B02 00272789 03000000 00D85504 .>...''.......U.
[1376]  00000000 001D0000 00000000 00010000 ................
[1392]  00000000 00000000 00000000 00000000 ................
[1408]  00000000 00000000 00000000 00000000 ................
[1424]  00000000 00000000 00000000 00000000 ................
[1440]  00000000 00000000 00000000 00000000 ................
[1456]  00000000 00000000 00000000 00000000 ................
[1472]  00000000 00000000 00C9054B 06000000 ...........K....
[1488]  004906E9 030000C3 4E920300 000000D8 .I......N.......
[1504]  55040000 0000001C 00000000 0000000A U...............
[1520]  00000000 00000000 00000000 00000000 ................
[1536]  00000000 00000000 00000000 00000000 ................
[1552]  00000000 00000000 00000000 00000000 ................
[1568]  00000000 00000000 00000000 00000000 ................
[1584]  00000000 00000000 00000000 00000000 ................
[1600]  00000000 00000000 0000004B 06CD0600 ...........K....
[1616]  000000CB 06820000 00476392 03000000 .........Gc.....
[1632]  00D85504 00000000 00180000 00000000 ..U.............
[1648]  00010000 00000000 00000000 00000000 ................
[1664]  00000000 00000000 00000000 00000000 ................
[1680]  00000000 00000000 00000000 00000000 ................
[1696]  00000000 00000000 00000000 00000000 ................
[1712]  00000000 00000000 00000000 00000000 ................
[1728]  00000000 00000000 00000000 00CD064F ...............O
[1744]  07000000 004D0733 4500001D 75920300 .....M.3E...u...
[1760]  000000D8 55040000 00000005 00000000 ....U...........
[1776]  00000001 00000000 00000000 00000000 ................
[1792]  00000000 00000000 00000000 00000000 ................
[1808]  00000000 00000000 00000000 00000000 ................
[1824]  00000000 00000000 00000000 00000000 ................
[1840]  00090000 00000000 00000000 00000000 ................
[1856]  00000000 00000000 00000000 0000004F ...............O
[1872]  07D10700 000000CF 07B01700 00C58292 ................
[1888]  03000000 00D85504 00000000 001E0000 ......U.........
[1904]  00000000 00010000 00000000 00000000 ................
[1920]  00000000 00000000 00000000 00000000 ................
[1936]  00000000 00000000 00000000 00000000 ................
[1952]  00000000 00000000 00000000 00000000 ................
[1968]  00000000 00000000 00000000 00000000 ................
[1984]  00000000 00000000 00000000 00000000 ................
[2000]  00D10753 08000000 00510831 450000E1 ...S.....Q.1E...
[2016]  85920300 000000D8 55040000 00000020 ........U...... 
[2032]  00000000 00000001 00000000 00000000 ................
[2048]  00000000 00000000 00000000 00000000 ................
[2064]  00000000 00000000 00000000 00000000 ................
[2080]  00000000 00000000 00000000 00000000 ................
[2096]  00000000 00090000 00000000 00000000 ................
[2112]  00000000 00000000 00000000 00000000 ................
[2128]  00000053 08000000 000000D3 08EB0300 ...S............
[2144]  00FBE617 09000000 00D85504 00000000 ..........U.....
[2160]  00210000 00000000 00020000 00000000 .!..............
[2176]  00000000 00000000 00000000 00000000 ................
[2192]  00000000 00000000 00000000 00000000 ................
[2208]  00000000 00000000 00000000 00000000 ................
[2224]  00000000 00000000 00000000 00000000 ................
[2240]  00000000 00000000 00000000 00000000 ................
[2256]  00000000 00
     */

}
